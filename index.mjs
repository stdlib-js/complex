// Copyright (c) 2025 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import e from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-read-only-property@esm/index.mjs";import t from"https://cdn.jsdelivr.net/gh/stdlib-js/number-float64-base-assert-is-almost-equal@esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/number-float32-base-assert-is-almost-equal@esm/index.mjs";import r from"https://cdn.jsdelivr.net/gh/stdlib-js/array-float64@esm/index.mjs";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/array-float32@esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/number-float64-base-assert-is-almost-same-value@esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/number-float32-base-assert-is-almost-same-value@esm/index.mjs";import a from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-function@esm/index.mjs";import{isPrimitive as u}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nonnegative-integer@esm/index.mjs";import m from"https://cdn.jsdelivr.net/gh/stdlib-js/string-format@esm/index.mjs";import l from"https://cdn.jsdelivr.net/gh/stdlib-js/string-replace@esm/index.mjs";import p from"https://cdn.jsdelivr.net/gh/stdlib-js/number-ctor@esm/index.mjs";import{isPrimitive as c}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-number@esm/index.mjs";import f from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-property@esm/index.mjs";import d from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-property@esm/index.mjs";import v from"https://cdn.jsdelivr.net/gh/stdlib-js/number-float64-base-to-float32@esm/index.mjs";import h from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-constructor-name@esm/index.mjs";import x from"https://cdn.jsdelivr.net/gh/stdlib-js/number-float32-base-assert-is-same-value@esm/index.mjs";import g from"https://cdn.jsdelivr.net/gh/stdlib-js/number-float32-base-assert-is-same-value-zero@esm/index.mjs";import{isPrimitive as b}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-string@esm/index.mjs";import w from"https://cdn.jsdelivr.net/gh/stdlib-js/string-base-replace@esm/index.mjs";import j from"https://cdn.jsdelivr.net/gh/stdlib-js/number-float64-base-assert-is-same-value@esm/index.mjs";import y from"https://cdn.jsdelivr.net/gh/stdlib-js/number-float64-base-assert-is-same-value-zero@esm/index.mjs";import E from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-abs@esm/index.mjs";import T from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-max@esm/index.mjs";import N from"https://cdn.jsdelivr.net/gh/stdlib-js/constants-float64-max@esm/index.mjs";import V from"https://cdn.jsdelivr.net/gh/stdlib-js/constants-float64-smallest-normal@esm/index.mjs";import S from"https://cdn.jsdelivr.net/gh/stdlib-js/constants-float64-eps@esm/index.mjs";import C from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-keys@esm/index.mjs";import _ from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-own-property@esm/index.mjs";function R(e){var t=new r(2);return t[0]=e.re,t[1]=e.im,t}function F(e){var t=new i(2);return t[0]=e.re,t[1]=e.im,t}var L={};e(L,"isAlmostEqual",(function(e,r,i){var o,s,a,u,m;return a=e.BYTES_PER_ELEMENT,u=r.BYTES_PER_ELEMENT,4===a&&4===u?(m=n,o=F(e),s=F(r)):(m=t,o=R(e),s=R(r)),m(o[0],s[0],i)&&m(o[1],s[1],i)})),e(L,"isAlmostSameValue",(function(e,t,n){var r,i,a,u,m;return a=e.BYTES_PER_ELEMENT,u=t.BYTES_PER_ELEMENT,4===a&&4===u?(m=s,r=F(e),i=F(t)):(m=o,r=R(e),i=R(t)),m(r[0],i[0],n)&&m(r[1],i[1],n)}));var P="number";var q="number";var M={};function B(e,t){if(!(this instanceof B))throw new TypeError("invalid invocation. Constructor must be called with the `new` keyword.");if(!c(e))throw new TypeError(m("invalid argument. Real component must be a number. Value: `%s`.",e));if(!c(t))throw new TypeError(m("invalid argument. Imaginary component must be a number. Value: `%s`.",t));return f(this,"re",{configurable:!1,enumerable:!0,writable:!1,value:v(e)}),f(this,"im",{configurable:!1,enumerable:!0,writable:!1,value:v(t)}),this}function Y(e,t){if(!(this instanceof Y))throw new TypeError("invalid invocation. Constructor must be called with the `new` keyword.");if(!c(e))throw new TypeError(m("invalid argument. Real component must be a number. Value: `%s`.",e));if(!c(t))throw new TypeError(m("invalid argument. Imaginary component must be a number. Value: `%s`.",t));return f(this,"re",{configurable:!1,enumerable:!0,writable:!1,value:e}),f(this,"im",{configurable:!1,enumerable:!0,writable:!1,value:t}),this}e(M,"assert",L),e(M,"cast",(function(e,t,n){if(!a(e))throw new TypeError(m("invalid argument. First argument must be a function. Value: `%s`.",e));if(!u(t))throw new TypeError(m("invalid argument. Second argument must be a nonnegative integer. Value: `%s`.",t));if(!a(n))throw new TypeError(m("invalid argument. Third argument must be a constructor function. Value: `%s`.",n));return t<=5?[function(){var t=e();if(typeof t===P)return new n(t,0);return t},function(t){var r=e(t);if(typeof r===P)return new n(r,0);return r},function(t,r){var i=e(t,r);if(typeof i===P)return new n(i,0);return i},function(t,r,i){var o=e(t,r,i);if(typeof o===P)return new n(o,0);return o},function(t,r,i,o){var s=e(t,r,i,o);if(typeof s===P)return new n(s,0);return s},function(t,r,i,o,s){var a=e(t,r,i,o,s);if(typeof a===P)return new n(a,0);return a}][t]:function(){var t,r,i;for(t=[],i=0;i<arguments.length;i++)t.push(arguments[i]);if(typeof(r=e.apply(null,t))===P)return new n(r,0);return r}})),e(M,"parse",(function(e){var t,n,r,i,o=[],s="",a=[],u=[],m=!0,c=0,f=0;if("string"!=typeof e)return null;for(e=l(e," ",""),i=0;i<e.length;i++)"+"!==e[i]&&"-"!==e[i]||0===i||"e"===e[i-1]?i===e.length-1&&(s+=e[i],u.push(s)):(u.push(s),s=""),s+=e[i];for(i=0;i<u.length;i++){if(t=!1,"i"===(r=u[i])[0]?(r=r.slice(1),t=!0):"i"===r[r.length-1]&&(r=r.slice(0,r.length-1),t=!0),n=p(r),isNaN(n)&&"NaN"!==r&&"+NaN"!==r&&"-NaN"!==r){m=!1;break}t?o.push(n):a.push(n)}if(!m)return null;for(i=0;i<a.length;i++)c+=a[i];for(i=0;i<o.length;i++)f+=o[i];return{re:c,im:f}})),e(M,"wrap",(function(e,t,n){if(!a(e))throw new TypeError(m("invalid argument. First argument must be a function. Value: `%s`.",e));if(!u(t))throw new TypeError(m("invalid argument. Second argument must be a nonnegative integer. Value: `%s`.",t));if(!a(n))throw new TypeError(m("invalid argument. Third argument must be a constructor function. Value: `%s`.",n));return t<=5?[function(){return e()},function(t){typeof t===q&&(t=new n(t,0));return e(t)},function(t,r){typeof t===q&&(t=new n(t,0));typeof r===q&&(r=new n(r,0));return e(t,r)},function(t,r,i){typeof t===q&&(t=new n(t,0));typeof r===q&&(r=new n(r,0));typeof i===q&&(i=new n(i,0));return e(t,r,i)},function(t,r,i,o){typeof t===q&&(t=new n(t,0));typeof r===q&&(r=new n(r,0));typeof i===q&&(i=new n(i,0));typeof o===q&&(o=new n(o,0));return e(t,r,i,o)},function(t,r,i,o,s){typeof t===q&&(t=new n(t,0));typeof r===q&&(r=new n(r,0));typeof i===q&&(i=new n(i,0));typeof o===q&&(o=new n(o,0));typeof s===q&&(s=new n(s,0));return e(t,r,i,o,s)}][t]:function(){var t,r,i;for(t=[],i=0;i<arguments.length;i++)typeof(r=arguments[i])===q&&(r=new n(r,0)),t.push(r);return e.apply(null,t)}})),d(B,"BYTES_PER_ELEMENT",4),d(B.prototype,"BYTES_PER_ELEMENT",4),d(B.prototype,"byteLength",8),d(B.prototype,"toString",(function(){var e=""+this.re;return this.im<0?e+=" - "+-this.im:e+=" + "+this.im,e+="i"})),d(B.prototype,"toJSON",(function(){var e={type:"Complex64"};return e.re=this.re,e.im=this.im,e})),d(Y,"BYTES_PER_ELEMENT",8),d(Y.prototype,"BYTES_PER_ELEMENT",8),d(Y.prototype,"byteLength",16),d(Y.prototype,"toString",(function(){var e=""+this.re;return this.im<0?e+=" - "+-this.im:e+=" + "+this.im,e+="i"})),d(Y.prototype,"toJSON",(function(){var e={type:"Complex128"};return e.re=this.re,e.im=this.im,e}));var A={complex64:B,complex128:Y};function I(e){return A[e]||null}var $={float64:"complex128",float32:"complex64"},k=I($.float64);function W(e,t,n){var r;if(arguments.length>2){if(r=I($[n]))return new r(e,t);throw new TypeError(m("invalid argument. Must provide a recognized data type. Value: `%s`.",n))}return new k(e,t)}var z={Complex64:"complex64",Complex128:"complex128"},J=["complex64","complex128"];function O(){return J.slice()}var U,Z=O(),D=[];for(U=0;U<Z.length;U++)D.push(I(Z[U]));var G=Z.length;function H(e){var t;for(t=0;t<G;t++)if(e instanceof D[t])return Z[t];return z[h(e)]||null}function K(e){return e.re}function Q(e){return e.im}function X(e,t){return new B(v(K(e)+K(t)),v(Q(e)+Q(t)))}d(X,"assign",(function(e,t,n,r,i,o,s){return i[s]=v(e+n),i[s+o]=v(t+r),i})),d(X,"strided",(function(e,t,n,r,i,o,s,a,u){return s[u]=v(e[n]+r[o]),s[u+a]=v(e[n+t]+r[o+i]),s}));var ee={};function te(e,t){var n=K(e),r=K(t),i=Q(e),o=Q(t),s=v(n*r)-v(i*o),a=v(n*o)+v(i*r);return new B(v(s),v(a))}function ne(e,t){return new B(v(K(t)*e),v(Q(t)*e))}e(ee,"isAlmostEqual",(function(e,t,r){var i=F(e),o=F(t);return n(i[0],o[0],r)&&n(i[1],o[1],r)})),e(ee,"isAlmostSameValue",(function(e,t,n){var r=F(e),i=F(t);return s(r[0],i[0],n)&&s(r[1],i[1],n)})),e(ee,"isEqual",(function(e,t){var n=F(e),r=F(t);return n[0]===r[0]&&n[1]===r[1]})),e(ee,"isNotEqual",(function(e,t){var n=F(e),r=F(t);return n[0]!==r[0]||n[1]!==r[1]})),e(ee,"isSameValue",(function(e,t){var n=F(e),r=F(t);return x(n[0],r[0])&&x(n[1],r[1])})),e(ee,"isSameValueZero",(function(e,t){var n=F(e),r=F(t);return g(n[0],r[0])&&g(n[1],r[1])})),d(te,"assign",(function(e,t,n,r,i,o,s){return i[s]=v(e*n)-v(t*r),i[s+o]=v(e*r)+v(t*n),i})),d(te,"strided",(function(e,t,n,r,i,o,s,a,u){var m=e[n],l=e[n+t],p=r[o],c=r[o+i];return s[u]=v(m*p)-v(l*c),s[u+a]=v(m*c)+v(l*p),s})),d(ne,"assign",(function(e,t,n,r,i,o){return r[o]=v(t*e),r[o+i]=v(n*e),r})),d(ne,"strided",(function(e,t,n,r,i,o,s){return i[s]=v(e*t[r]),i[s+o]=v(e*t[r+n]),i}));var re={};e(re,"add",X),e(re,"assert",ee),e(re,"identity",(function(e){return e})),e(re,"mul",te),e(re,"neg",(function(e){return new B(-K(e),-Q(e))})),e(re,"scale",ne),e(re,"sub",(function(e,t){return new B(v(K(e)-K(t)),v(Q(e)-Q(t)))}));var ie={};function oe(e){return e.re}function se(e){return e.im}function ae(e,t){return new Y(oe(e)+oe(t),se(e)+se(t))}e(ie,"base",re),e(ie,"conj",(function(e){return new e.constructor(e.re,-e.im)})),e(ie,"Complex64",B),e(ie,"imag",Q),e(ie,"parseComplex64",(function(e){var t,n,r=0;if(!b(e))throw new TypeError(m("invalid argument. First argument must be a string. Value: `%s`.",e));if(!(t=w(e,/\s/g,"").match(/^([-+]?(\d*\.?\d*(?:[eE][-+]?\d+)?|Infinity|NaN)i?)?([-+])?((\d*\.?\d*(?:[eE][-+]?\d+)?|Infinity|NaN)i)?$/)))throw new Error(m("invalid argument. Unable to parse input string as a complex number. Value: `%s`.",e));return n=t[1]&&!t[1].endsWith("i")?parseFloat(t[1]):0,t[4]?r=("-"===t[3]?-1:1)*parseFloat(w(t[4],/i$/,"")):t[1]&&t[1].endsWith("i")&&(r=parseFloat(w(t[1],/i$/,""))),new B(n,r)})),e(ie,"real",K),e(ie,"reim",F),e(ie,"reviveComplex64",(function(e,t){return t&&t.type&&"Complex64"===t.type&&c(t.re)&&c(t.im)?new B(t.re,t.im):t})),d(ae,"assign",(function(e,t,n,r,i,o,s){return i[s]=e+n,i[s+o]=t+r,i})),d(ae,"strided",(function(e,t,n,r,i,o,s,a,u){return s[u]=e[n]+r[o],s[u+a]=e[n+t]+r[o+i],s}));var ue={};function me(e,t,n,r,i,o){var s;return 0===i?(e+r*(t/n))*o:0===(s=t*i)?e*o+t*o*i:(e+s)*o}function le(e,t,n,r){var i,o,s;return s=1/(n+r*(o=r/n)),(i=[0,0])[0]=me(e,t,n,r,o,s),i[1]=me(t,-e,n,r,o,s),i}e(ue,"isAlmostEqual",(function(e,n,r){var i=R(e),o=R(n);return t(i[0],o[0],r)&&t(i[1],o[1],r)})),e(ue,"isAlmostSameValue",(function(e,t,n){var r=R(e),i=R(t);return o(r[0],i[0],n)&&o(r[1],i[1],n)})),e(ue,"isEqual",(function(e,t){var n=R(e),r=R(t);return n[0]===r[0]&&n[1]===r[1]})),e(ue,"isNotEqual",(function(e,t){var n=R(e),r=R(t);return n[0]!==r[0]||n[1]!==r[1]})),e(ue,"isSameValue",(function(e,t){var n=R(e),r=R(t);return j(n[0],r[0])&&j(n[1],r[1])})),e(ue,"isSameValueZero",(function(e,t){var n=R(e),r=R(t);return y(n[0],r[0])&&y(n[1],r[1])}));var pe=.5*N,ce=V*(2/S),fe=2/(S*S);function de(e,t,n,r,i,o,s){var a,u,m,l;return u=T(E(e),E(t)),m=T(E(n),E(r)),l=1,u>=pe?(e*=.5,t*=.5,l*=2):u<=ce&&(e*=fe,t*=fe,l/=fe),m>=pe?(n*=.5,r*=.5,l*=.5):m<=ce&&(n*=fe,r*=fe,l*=fe),E(r)<=E(n)?a=le(e,t,n,r):(a=le(t,e,r,n))[1]*=-1,a[0]*=l,a[1]*=l,i[s]=a[0],i[s+o]=a[1],i}var ve=new r(2);function he(e,t){var n,r,i,o;return n=oe(e),r=oe(t),i=se(e),o=se(t),new Y((ve=de(n,i,r,o,ve,1,0))[0],ve[1])}function xe(e,t){var n=oe(e),r=oe(t),i=se(e),o=se(t);return new Y(n*r-i*o,n*o+i*r)}function ge(e,t,n){var r=oe(e),i=se(e),o=oe(t),s=se(t);return new Y(r*o-i*s+oe(n),r*s+i*o+se(n))}function be(e,t){return new Y(oe(t)*e,se(t)*e)}d(he,"assign",de),d(he,"strided",(function(e,t,n,r,i,o,s,a,u){return de(e[n],e[n+t],r[o],r[o+i],s,a,u)})),d(xe,"assign",(function(e,t,n,r,i,o,s){return i[s]=e*n-t*r,i[s+o]=e*r+t*n,i})),d(xe,"strided",(function(e,t,n,r,i,o,s,a,u){var m=e[n],l=e[n+t],p=r[o],c=r[o+i];return s[u]=m*p-l*c,s[u+a]=m*c+l*p,s})),d(ge,"assign",(function(e,t,n,r,i,o,s,a,u){return s[u]=e*n-t*r+i,s[u+a]=e*r+t*n+o,s})),d(ge,"strided",(function(e,t,n,r,i,o,s,a,u,m,l,p){var c=e[n],f=e[n+t],d=r[o],v=r[o+i],h=s[u],x=s[u+a];return m[p]=c*d-f*v+h,m[p+l]=c*v+f*d+x,m})),d(be,"assign",(function(e,t,n,r,i,o){return r[o]=t*e,r[o+i]=n*e,r})),d(be,"strided",(function(e,t,n,r,i,o,s){return i[s]=e*t[r],i[s+o]=e*t[r+n],i}));var we={};e(we,"add",ae),e(we,"assert",ue),e(we,"div",he),e(we,"identity",(function(e){return e})),e(we,"mul",xe),e(we,"muladd",ge),e(we,"neg",(function(e){return new Y(-oe(e),-se(e))})),e(we,"scale",be),e(we,"sub",(function(e,t){return new Y(oe(e)-oe(t),se(e)-se(t))}));var je={};e(je,"base",we),e(je,"conj",(function(e){return new Y(oe(e),-se(e))})),e(je,"Complex128",Y),e(je,"imag",se),e(je,"parseComplex128",(function(e){var t,n,r=0;if(!b(e))throw new TypeError(m("invalid argument. First argument must be a string. Value: `%s`.",e));if(!(t=w(e,/\s/g,"").match(/^([-+]?(\d*\.?\d*(?:[eE][-+]?\d+)?|Infinity|NaN)i?)?([-+])?((\d*\.?\d*(?:[eE][-+]?\d+)?|Infinity|NaN)i)?$/)))throw new Error(m("invalid argument. Unable to parse input string as a complex number. Value: `%s`.",e));return n=t[1]&&!t[1].endsWith("i")?parseFloat(t[1]):0,t[4]?r=("-"===t[3]?-1:1)*parseFloat(w(t[4],/i$/,"")):t[1]&&t[1].endsWith("i")&&(r=parseFloat(w(t[1],/i$/,""))),new Y(n,r)})),e(je,"real",oe),e(je,"reim",R),e(je,"reviveComplex128",(function(e,t){return t&&t.type&&"Complex128"===t.type&&c(t.re)&&c(t.im)?new Y(t.re,t.im):t}));var ye={float64:{complex64:"complex128",complex128:"complex128"},float32:{complex64:"complex64",complex128:"complex128"},int32:{complex64:"complex128",complex128:"complex128"},int16:{complex64:"complex64",complex128:"complex128"},int8:{complex64:"complex64",complex128:"complex128"},uint32:{complex64:"complex128",complex128:"complex128"},uint16:{complex64:"complex64",complex128:"complex128"},uint8:{complex64:"complex64",complex128:"complex128"},uint8c:{complex64:"complex64",complex128:"complex128"},complex128:{float64:"complex128",float32:"complex128",int32:"complex128",int16:"complex128",int8:"complex128",uint32:"complex128",uint16:"complex128",uint8:"complex128",uint8c:"complex128",complex64:"complex128",complex128:"complex128"},complex64:{float64:"complex128",float32:"complex64",int32:"complex128",int16:"complex64",int8:"complex64",uint32:"complex128",uint16:"complex64",uint8:"complex64",uint8c:"complex64",complex64:"complex64",complex128:"complex128"}};function Ee(e,t){var n;return 0===arguments.length?function(){var e,t,n,r,i,o,s,a,u;for(n={},t=(e=C(ye)).length,u=0;u<t;u++){for(i=e[u],s=ye[i],r={},a=0;a<t;a++)r[o=e[a]]=s[o];n[i]=r}return n}():_(ye,e)&&(n=ye[e],_(n,t))?n[t]:null}var Te={Complex128:Y,Complex64:B};function Ne(e,t){var n;return t&&t.type&&c(t.re)&&c(t.im)&&(n=Te[t.type])?new n(t.re,t.im):t}var Ve={};e(Ve,"base",M),e(Ve,"complex",W),e(Ve,"ctors",I),e(Ve,"dtype",H),e(Ve,"dtypes",O),e(Ve,"float32",ie),e(Ve,"float64",je),e(Ve,"promotionRules",Ee),e(Ve,"reviveComplex",Ne);export{M as base,W as complex,I as ctors,Ve as default,H as dtype,O as dtypes,ie as float32,je as float64,Ee as promotionRules,Ne as reviveComplex};
//# sourceMappingURL=index.mjs.map
